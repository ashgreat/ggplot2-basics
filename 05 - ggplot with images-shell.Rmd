---
title: "ggplot with image"
author: "Ashwin Malsh√©"
date: "06/03/2021"
output: html_document
---

For this exercise, we will install two new packages. Copy and paste the following command in your RStudio console and execute it.

install.packages(c('png', 'jpeg'))


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(grid)
library(png)
library(jpeg)

```

## Use `annotation_custom` to include a `grob` or graphical object

Read the image from your computer. For this, you only need the file path.

In the code below I am reading a *jpg* file so I use the function `readJPEG` from package `jpeg`

```{r}
# Make sure that the file type is JPEG

img1 <- jpeg::readJPEG("diamond.jpg")

# Next create a graphical object or a `grob`

grob1 <- grid::rasterGrob(image = img1)
```

Create a plot using the above `grob`. In the plot `carat` is on x axis and `price` is on y. Map the color to `clarity`

For this, I am using `annotation_custom` function from `ggplot2`

```{r}
ggplot(diamonds, aes(x = , y = )) +
  annotation_custom(grob1,
                    xmin = -Inf, 
                    xmax = Inf, 
                    ymin = -Inf, 
                    ymax = Inf) +
  geom_point(aes(color = ),
             alpha = 0.4, # Adjust alpha to whatever you like
             show.legend = FALSE) +
  theme(panel.background = element_rect(fill = "white", 
                                        color = "white"))
  
```

## Using `annotation_raster` to avoid creating a `grob` separately

Import another image and create a bar graph.

```{r}
img2 <- readJPEG("Bugatti.jpg")
```


```{r}

ggplot(mpg, aes(class)) +
  annotation_raster(img2,
                    xmin = -Inf, 
                    xmax = Inf, 
                    ymin = -Inf, 
                    ymax = Inf,
                    interpolate = TRUE) +
  geom_bar(fill = "white",
           alpha = 0.1,
           color = "grey50") +
  scale_y_continuous(expand = c(0, 0),
                     limits = c(0, 70))
```



